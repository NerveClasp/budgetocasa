<link rel="import" href="../../bower_components/polymer/polymer.html">

<dom-module id="boc-home">
  <template>
    <style>
      :host {
        display: block;
      }
      .action {
        margin-left: 10px;
        margin-right: 10px;
        margin-bottom: 70px;
        position: fixed;
        right: 25px;
        bottom: 25px;
      }
      /*.card-actions .card-content{
        display: flex;
        flex-direction: column;
      }*/
      .sitem{
        word-wrap: break-word;
        width: 100%;
      }
      #slist{
        display: block;
        width: 100%;
        padding: 0;
      }
      @media only screen and (min-width: 600px) {
        #slist{
          display: flex;
          flex-flow: row;
          flex-wrap: wrap;
          width: 99.4%;
          padding-left: 0.3%;
        }
        .sitem{
          width: 50%;
        }
      }
    </style>
    <firebase-auth user="{{user}}"></firebase-auth>
    <firebase-document
      id="userdata"
      path="/users/[[user.uid]]"
      data={{userdata}}>
    </firebase-document>
    <firebase-document
      id="house"
      path="/nodes/[[userdata.node]]"
      data={{house}}>
    </firebase-document>
    <firebase-query
      id="shoplist"
      path="/nodes/[[userdata.node]]/shopinglist"
      data={{shoplist}}>
    </firebase-query>

    <boc-add-item id="addit" source=[[userdata.node]]></boc-add-item>
    <div id="slist">
      <template is="dom-repeat" items="[[shoplist]]" as="item">
        <boc-item class="sitem" node="[[userdata.node]]" item="[[item]]" name="[[item.name]]"></boc-item>
      </template>
    </div>


    <!-- <boc-item name="[[user.uid]]"></boc-item> -->
    <!-- <boc-item name="[[house.message]]"></boc-item> -->
    <!-- <boc-item name="Bread"></boc-item> -->

    <!-- <boc-add-item></boc-add-item> -->
    <!-- <p>- current shopping list</p> -->
    <!-- <p>- add new item to the list</p> -->
    <!-- <p>- add new purchase</p> -->
    <template is="dom-if" if="[[hidden]]">
      <paper-fab class="action" icon="add" on-tap="_add"></paper-fab>
    </template>
    <template is="dom-if" if="[[!hidden]]">
      <paper-fab class="action" icon="remove" on-tap="_add"></paper-fab>
    </template>
  </template>
  <script>
    Polymer({
      is: 'boc-home',
      properties: {
        // hidden: { type: Boolean, value: true, observer: "_updown" },
        user: { type: Object },
        elev: { type: Number, value: 0 },
        counter: { type: Number, value: 0 }
      },
      _add: function() {
        // if(this.hidden){
        //   this.hidden = false;
        // }else{
        //   this.hidden = true;
        // }
        console.log("hello");
      },
      _raise: function() {
        if( this.elev < 5 ){ //5 max
          this.elev++;
        }else{
          this.elev = 0;
        }
      },
      _lower: function() {
        if( this.elev > 0 ) this.elev--;
      },
      _updown: function(e) {
        console.log(e);
      }
    });
  </script>
</dom-module>
